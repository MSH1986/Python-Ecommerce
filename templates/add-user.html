{% extends "base.html" %}

{% block title %}Add User{% endblock %}


{% block content %}

    <div class="containerAdd">
        <form class="form" method="post">
            <div class="form-group position-relative">
              <label for="exampleInputName1">Name</label>
              <input type="text" name="name" class="form-control" id="exampleInputName1">
              <span>The name should be more than 4 letters</span>
              <i class="fa-solid fa-circle-check text-success"></i>
            </div>

            <div class="form-group position-relative">
              <label for="exampleInputEmail1">Email address</label>
              <input type="email" name="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
              <span>The Email is invalid</span>
              <i class="fa-solid fa-circle-check text-success"></i>
            </div>

            <!-- <div class="form-group form-check">
              <input type="checkbox" class="form-check-input" id="exampleCheck1">
              <label class="form-check-label" for="exampleCheck1">Check me out</label>
            </div> -->

            
            <div class="btns">
                <button id="button" type="submit" class="btn btn-success" disabled="disabled">Add User</button>
                <a class="btn btn-danger" href="{{url_for('read_users')}}">Cancel</a>
            </div>
          </form>
    </div>

{% endblock %}

    <script>
      let listOf_I = document.querySelectorAll('.form .form-group i')
      let listOf_Span = document.querySelectorAll('.form .form-group span')
      const nameUser= document.getElementById('exampleInputName1');
      const emailUser= document.getElementById('exampleInputEmail1');
      const submitBtn = document.getElementById('button')


      //  show the error message and the icon for User Name
      if(nameUser != null){
          nameUser.addEventListener('input', (e)=> {
            if(e.target.value.length > 4){
              listOf_I[0].classList.add('active')
              listOf_Span[0].classList.remove('active')
              btnChange()
            }
            else{
              listOf_I[0].classList.remove('active')
              listOf_Span[0].classList.add('active')
              btnChange()
            }
          })
        }


      //  show the error message and the icon for User Email
      const regex = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
      if(emailUser != null){
        emailUser.addEventListener('input', ()=> {
            if(emailUser.value.match(regex)){
              listOf_I[1].classList.add('active')
              listOf_Span[1].classList.remove('active')
              btnChange()
            }
            else{
              listOf_I[1].classList.remove('active')
              listOf_Span[1].classList.add('active')
              btnChange()
            }
          })
       }


      //  funktion to change the button to enabled
       function btnChange(){
        if (listOf_I[0].classList.contains('active') && listOf_I[1].classList.contains('active')) {
            submitBtn.removeAttribute("disabled");
        } else {
            submitBtn.setAttribute("disabled", "disabled");
        }
       }

     
    </script>
